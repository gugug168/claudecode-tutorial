# Contexts（上下文模式）

<!--
╔══════════════════════════════════════════════════════════════════╗
║  【教学概述】                                                      ║
╠══════════════════════════════════════════════════════════════════╣
║  Contexts 是什么：预设的工作模式，根据任务类型调整 AI 行为         ║
║  有什么用：让 Claude 以正确的"心态"处理不同类型的任务              ║
║  核心模式：开发模式、研究模式、审查模式                            ║
╚══════════════════════════════════════════════════════════════════╝
-->

Contexts 是预设的工作模式，让 Claude 根据任务类型调整行为。

## 三种核心模式

### 1. 开发模式 (dev.md)

**什么时候用**：写代码、实现功能、构建项目

```
模式：活跃开发
重点：实现、编码、构建功能
```

**行为特点**：
- 先写代码，后解释
- 偏好可工作的解决方案，而非完美方案
- 更改后运行测试
- 保持提交原子性

**优先级**：
1. 让它工作
2. 让它正确
3. 让它干净

**常用工具**：
- Edit, Write — 代码更改
- Bash — 运行测试/构建
- Grep, Glob — 查找代码

---

### 2. 研究模式 (research.md)

**什么时候用**：探索、调查、学习新东西

```
模式：探索、调查、学习
重点：先理解后行动
```

**行为特点**：
- 广泛阅读后再下结论
- 提出澄清性问题
- 边做边记录发现
- 理解清楚后再写代码

**研究流程**：
1. 理解问题
2. 探索相关代码/文档
3. 形成假设
4. 用证据验证
5. 总结发现

**常用工具**：
- Read — 理解代码
- Grep, Glob — 查找模式
- WebSearch, WebFetch — 外部文档
- Task with Explore agent — 代码库问题

**输出格式**：发现优先，建议其次

---

### 3. 审查模式 (review.md)

**什么时候用**：PR 审查、代码分析、质量检查

```
模式：PR 审查、代码分析
重点：质量、安全、可维护性
```

**行为特点**：
- 评论前彻底阅读
- 按严重程度排序问题（critical > high > medium > low）
- 建议修复，不只是指出问题
- 检查安全漏洞

**审查检查清单**：
- [ ] 逻辑错误
- [ ] 边缘情况
- [ ] 错误处理
- [ ] 安全（注入、认证、密钥）
- [ ] 性能
- [ ] 可读性
- [ ] 测试覆盖率

**输出格式**：按文件分组，严重程度优先

---

## 如何使用 Contexts

### 方法一：在 CLAUDE.md 中引用

```markdown
<!-- 在项目根目录的 CLAUDE.md 中 -->
# 项目说明

## 当前工作模式
使用开发模式：@contexts/dev.md
```

### 方法二：手动切换

告诉 Claude 你想要什么模式：

```
"切换到研究模式，我想了解一下这个代码库的结构"
"切换到审查模式，帮我检查这个 PR"
"切换到开发模式，开始实现用户认证功能"
```

### 方法三：让 Claude 自动选择

Claude 会根据任务类型自动选择合适的模式：

- "帮我实现..." → 开发模式
- "这是什么？"、"为什么..." → 研究模式
- "审查这个 PR"、"检查代码质量" → 审查模式

---

## 模式对比

| 特性 | 开发模式 | 研究模式 | 审查模式 |
|------|----------|----------|----------|
| 主要动作 | 写代码 | 读代码 | 分析代码 |
| 速度优先 | 是 | 否 | 否 |
| 深度思考 | 低 | 高 | 中 |
| 输出类型 | 代码 | 发现 | 问题列表 |
| 工具使用 | Edit, Write | Read, Grep | Read, Grep |

---

## 自定义 Context

你可以创建自己的 context 文件：

```markdown
# 我的自定义模式

Mode: 你的模式名称
Focus: 重点做什么

## Behavior
- 行为特点 1
- 行为特点 2

## Priorities
1. 第一优先级
2. 第二优先级

## Tools to favor
- 推荐使用的工具
```

保存到 `~/.claude/contexts/my-context.md`，然后引用它。
