# Everything Claude Code 仓库总览

## 一句话总结
这是一个由 Anthropic 黑客马拉松获胜者创建的 Claude Code 完整配置集合，包含13个子代理、37个技能、31个命令、8+规则和多个钩子，帮助你更高效地使用 Claude Code。

---

## 它是什么？（小白视角）

### 用一个比喻来理解

想象你雇佣了一个超级助手（Claude），但他刚来公司，不了解你的工作方式和偏好。

**Everything Claude Code 就像是给这个助手的一本"工作手册"：**

- **Agents（子代理）** = 各种专业顾问
  - 想设计房子？找建筑师顾问
  - 想检查安全？找安全顾问
  - 想写测试？找测试顾问

- **Skills（技能）** = 工作流程指南
  - "如何用TDD方式开发"的详细步骤
  - "如何审查Python代码"的检查清单
  - "如何部署到生产环境"的标准流程

- **Commands（命令）** = 快捷键
  - 输入 `/plan` 立即开始规划
  - 输入 `/tdd` 进入测试驱动开发模式
  - 输入 `/code-review` 让Claude审查你的代码

- **Rules（规则）** = 永远要遵守的原则
  - "代码覆盖率必须超过80%"
  - "禁止在代码中硬编码密码"
  - "提交前必须运行测试"

- **Hooks（钩子）** = 自动化触发器
  - 每次会话开始时自动加载之前的上下文
  - 每次会话结束时自动保存状态
  - 检测到console.log时自动提醒删除

---

## 这个仓库的背景

### 作者故事

作者 **Affaan Mustafa** 从 Claude Code 实验性发布时就开始使用，在2025年9月的 Anthropic x Forum Ventures 黑客马拉松中获胜（与搭档 @DRodriguezFX 一起用 Claude Code 完全构建了 [zenith.chat](https://zenith.chat)）。

这些配置经过了 **10个多月的日常高强度使用**，在多个生产应用中经过实战检验。

### 仓库数据

- **42K+ Stars** - GitHub 上非常受欢迎
- **5K+ Forks** - 被广泛使用和改进
- **24 贡献者** - 社区积极参与
- **6 种语言支持** - 包括中文

---

## 核心组件详解

### 1. Agents（子代理）- 13个

子代理是专门处理特定任务的"专家"，当主 Claude 遇到特定领域的问题时，可以把任务委托给它们。

| 代理名称 | 作用 | 什么时候用 |
|---------|------|-----------|
| planner | 功能规划 | 开始新功能时制定实施计划 |
| architect | 架构设计 | 需要做系统架构决策时 |
| tdd-guide | TDD指导 | 想用测试驱动开发方式写代码 |
| code-reviewer | 代码审查 | 检查代码质量和安全性 |
| security-reviewer | 安全审查 | 查找安全漏洞 |
| build-error-resolver | 构建错误解决 | 构建失败时自动修复 |
| e2e-runner | E2E测试 | 运行端到端测试 |
| refactor-cleaner | 重构清理 | 删除死代码 |
| doc-updater | 文档更新 | 同步更新文档 |
| go-reviewer | Go代码审查 | 审查Go语言代码 |
| go-build-resolver | Go构建错误 | 修复Go构建错误 |
| python-reviewer | Python审查 | 审查Python代码 |
| database-reviewer | 数据库审查 | 审查数据库相关代码 |

### 2. Skills（技能）- 37个

技能是预定义的工作流程，告诉 Claude "如何"完成某类任务。

**按类别分组：**

**编码标准类：**
- coding-standards - 通用编码最佳实践
- java-coding-standards - Java编码标准

**前端模式类：**
- frontend-patterns - React、Next.js模式

**后端模式类：**
- backend-patterns - API、数据库、缓存模式
- golang-patterns - Go语言惯用法
- python-patterns - Python惯用法
- django-patterns - Django模式
- springboot-patterns - Spring Boot模式
- jpa-patterns - JPA/Hibernate模式

**测试相关类：**
- tdd-workflow - TDD方法论
- golang-testing - Go测试模式
- python-testing - pytest测试
- cpp-testing - C++ GoogleTest测试
- django-tdd - Django TDD
- springboot-tdd - Spring Boot TDD
- e2e-testing - Playwright E2E测试

**安全相关类：**
- security-review - 安全检查清单
- security-scan - AgentShield安全审计
- django-security - Django安全
- springboot-security - Spring Boot安全

**持续学习类：**
- continuous-learning - 从会话中自动提取模式
- continuous-learning-v2 - 基于直觉的学习系统

**数据库相关类：**
- postgres-patterns - PostgreSQL优化
- database-migrations - 数据库迁移模式
- clickhouse-io - ClickHouse分析

**部署相关类：**
- deployment-patterns - CI/CD、Docker、健康检查
- docker-patterns - Docker Compose模式

**其他：**
- api-design - REST API设计
- verification-loop - 持续验证
- eval-harness - 评估循环
- iterative-retrieval - 渐进式上下文优化
- strategic-compact - 手动压缩建议
- configure-ecc - 交互式安装向导
- nutrient-document-processing - 文档处理

### 3. Commands（命令）- 31个

命令是快速执行特定任务的"快捷键"，以 `/` 开头。

**常用命令：**

| 命令 | 作用 |
|------|------|
| `/plan "描述"` | 创建实施计划 |
| `/tdd` | 启动TDD工作流 |
| `/code-review` | 审查代码 |
| `/build-fix` | 修复构建错误 |
| `/e2e` | 生成E2E测试 |
| `/refactor-clean` | 清理死代码 |
| `/security-scan` | 安全扫描 |
| `/learn` | 从当前会话提取模式 |
| `/checkpoint` | 保存验证状态 |
| `/verify` | 运行验证循环 |
| `/update-docs` | 更新文档 |
| `/test-coverage` | 测试覆盖率分析 |

**Go相关命令：**
- `/go-review` - Go代码审查
- `/go-test` - Go TDD工作流
- `/go-build` - Go构建修复

**Python相关命令：**
- `/python-review` - Python代码审查

**多代理协作命令：**
- `/multi-plan` - 多模型协作规划
- `/multi-execute` - 多模型协作执行
- `/multi-backend` - 后端多服务编排
- `/multi-frontend` - 前端多服务编排
- `/multi-workflow` - 通用多服务工作流
- `/orchestrate` - 多代理协调

**持续学习命令：**
- `/instinct-status` - 查看已学习的直觉
- `/instinct-import` - 导入直觉
- `/instinct-export` - 导出直觉
- `/evolve` - 将直觉聚类成技能
- `/skill-create` - 从git历史生成技能

**其他命令：**
- `/pm2` - PM2服务生命周期管理
- `/sessions` - 会话历史管理
- `/eval` - 根据标准评估
- `/setup-pm` - 配置包管理器
- `/update-codemaps` - 更新代码地图

### 4. Rules（规则）- 8+个

规则是"永远要遵守"的指导原则，放在 `~/.claude/rules/` 目录下。

**目录结构：**
```
rules/
├── common/           # 语言无关的通用原则（必装）
│   ├── coding-style.md    # 代码风格、不可变性
│   ├── git-workflow.md    # 提交格式、PR流程
│   ├── testing.md         # TDD、80%覆盖率要求
│   ├── performance.md     # 模型选择、上下文管理
│   ├── patterns.md        # 设计模式、骨架项目
│   ├── hooks.md           # 钩子架构
│   ├── agents.md          # 何时委托给子代理
│   └── security.md        # 强制安全检查
├── typescript/       # TypeScript/JavaScript专用
├── python/           # Python专用
└── golang/           # Go专用
```

### 5. Hooks（钩子）

钩子是在特定事件发生时自动触发的脚本。

**主要钩子类型：**

| 钩子类型 | 触发时机 | 用途 |
|---------|---------|------|
| PreToolUse | 使用工具前 | 验证输入、阻止危险操作 |
| PostToolUse | 使用工具后 | 检查结果、记录日志 |
| SessionStart | 会话开始时 | 加载上下文、恢复状态 |
| SessionEnd | 会话结束时 | 保存状态、清理资源 |
| Stop | 会话空闲时 | 自动保存、提醒用户 |
| PreCompact | 压缩前 | 保存重要状态 |

**实际应用示例：**
- 会话开始时自动加载之前的记忆
- 检测到 `console.log` 时提醒删除
- 会话结束时自动总结并保存学习到的模式

### 6. MCP（模型上下文协议）- 15个服务器

MCP 让 Claude 能够直接连接外部服务，像操作工具一样使用 GitHub、数据库、部署平台等。

**常用 MCP 服务器：**

| 服务器 | 作用 | 什么时候用 |
|--------|------|-----------|
| github | GitHub 操作 | 管理 PR、Issue、仓库 |
| supabase | 数据库操作 | 查询和管理 Supabase 数据库 |
| context7 | 实时文档 | 获取最新库文档 |
| vercel | 部署管理 | Vercel 项目和部署 |
| memory | 跨会话记忆 | 在多个会话间保存上下文 |
| firecrawl | 网页抓取 | 爬取网页内容 |

**重要提示**：配置 20-30 个 MCP，但只启用 5-10 个，以保护上下文窗口。

---

## 安装方式

### 方式一：作为插件安装（推荐）

```bash
# 添加市场
/plugin marketplace add affaan-m/everything-claude-code

# 安装插件
/plugin install everything-claude-code@everything-claude-code
```

### 方式二：手动安装

```bash
# 克隆仓库
git clone https://github.com/affaan-m/everything-claude-code.git

# 复制组件到Claude配置目录
cp everything-claude-code/agents/*.md ~/.claude/agents/
cp -r everything-claude-code/rules/common/* ~/.claude/rules/
cp everything-claude-code/commands/*.md ~/.claude/commands/
cp -r everything-claude-code/skills/* ~/.claude/skills/
```

---

## Token 优化建议

Claude Code 使用可能会很昂贵，以下设置可以显著降低成本：

```json
// ~/.claude/settings.json
{
  "model": "sonnet",
  "env": {
    "MAX_THINKING_TOKENS": "10000",
    "CLAUDE_AUTOCOMPACT_PCT_OVERRIDE": "50"
  }
}
```

| 设置 | 默认值 | 推荐值 | 效果 |
|------|--------|--------|------|
| model | opus | sonnet | 成本降低约60%，能处理80%以上的编码任务 |
| MAX_THINKING_TOKENS | 31,999 | 10,000 | 隐藏思考成本降低约70% |
| CLAUDE_AUTOCOMPACT_PCT_OVERRIDE | 95 | 50 | 更早压缩，长会话质量更好 |

---

## 常用工作流

### 开始新功能
```
/plan "添加用户认证功能"    → planner 创建实施蓝图
/tdd                        → tdd-guide 强制先写测试
/code-review                → code-reviewer 检查你的工作
```

### 修复Bug
```
/tdd                        → 写一个能复现bug的失败测试
                            → 实现修复，验证测试通过
/code-review                → 检查是否有回归问题
```

### 准备上线
```
/security-scan              → 安全审查：OWASP Top 10审计
/e2e                        → E2E测试：关键用户流程
/test-coverage              → 验证80%+覆盖率
```

---

## 学习路线建议

1. **第一天**：阅读总览文档（本文），了解整体架构
2. **第二天**：学习 Agents，理解各个代理的职责
3. **第三天**：学习 Commands，掌握常用命令
4. **第四天**：学习 Skills，了解各种工作流程
5. **第五天**：学习 Rules，理解编码规范
6. **第六天**：学习 Hooks，了解自动化机制
7. **第七天**：学习 MCP 配置，连接外部服务
8. **第八天**：阅读官方指南，学习高级技巧
9. **第九天**：查看项目模板，选择适合自己项目的配置
10. **第十天**：学习会话记录方法，建立自己的工作流
11. **第十一天**：实战练习，在实际项目中应用

---

## 相关链接

- **原仓库**：https://github.com/affaan-m/everything-claude-code
- **作者Twitter**：@affaanmustafa

### 本地指南文档
- **[简写指南](./08-官方指南/Shorthand-Guide-简写指南.md)** - 10个月实战配置总结
- **[长篇指南](./08-官方指南/Longform-Guide-长篇指南.md)** - Token优化、记忆持久化、评估等高级主题

---

## 文档目录

- [01-Agents/](./01-Agents/) - 13个子代理详解
- [02-Skills/](./02-Skills/) - 37个技能详解
- [03-Commands/](./03-Commands/) - 31个命令详解
- [04-Rules/](./04-Rules/) - 8+规则详解
- [05-Hooks/](./05-Hooks/) - 钩子机制详解
- [06-实战指南/](./06-实战指南/) - 安装和使用指南
- [07-MCP配置/](./07-MCP配置/) - 15个MCP服务器详解
- [08-官方指南/](./08-官方指南/) - 作者Twitter指南翻译
- [09-项目模板/](./09-项目模板/) - 6个项目配置模板
- [10-会话示例/](./10-会话示例/) - 3个会话记录示例

---

## 新增内容

### 09-项目模板（6个模板）

提供了各种项目类型的 CLAUDE.md 配置模板，可以直接复制使用：

| 模板 | 适用场景 |
|------|----------|
| 基础项目模板 | 通用 TypeScript/Next.js 项目 |
| 用户级配置模板 | 全局配置，所有项目共享 |
| Django API 模板 | Python 后端项目 |
| Go 微服务模板 | Go 后端项目 |
| Rust API 模板 | Rust 后端项目 |
| SaaS Next.js 模板 | SaaS 应用 |

### 10-会话示例（3个示例）

展示如何记录开发会话，便于恢复上下文和知识积累：

| 示例 | 类型 | 学习重点 |
|------|------|----------|
| 内存泄漏调查 | 调试排查 | 问题定位、调试技巧 |
| API 重构错误处理 | 代码重构 | 进度追踪、规范化 |
| 认证功能实现 | 功能开发 | 障碍记录、决策文档化 |
